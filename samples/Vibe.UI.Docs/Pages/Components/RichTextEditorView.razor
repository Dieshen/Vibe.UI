@page "/components/richtexteditor"
@using Vibe.UI.Components

<PageTitle>RichTextEditor - Vibe.UI</PageTitle>

<ComponentPage ComponentName="RichTextEditor"
               Category="Advanced"
               Description="A WYSIWYG rich text editor component with formatting tools, media embedding, and customizable toolbar."
               RelatedComponents="@relatedComponents">

    <PreviewContent>
        <div class="preview-demo" style="max-width: 700px; margin: 0 auto;">
            <RichTextEditor @bind-Content="editorContent"
                            Placeholder="Start typing..."
                            MinHeight="250" />
        </div>
    </PreviewContent>

    <Examples>
        <div class="example-item">
            <h3>Basic Editor</h3>
            <CodeBlock Code="@BasicCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Custom Toolbar</h3>
            <CodeBlock Code="@CustomToolbarCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Read-Only Mode</h3>
            <CodeBlock Code="@ReadOnlyCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>With File Upload</h3>
            <CodeBlock Code="@FileUploadCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Markdown Support</h3>
            <CodeBlock Code="@MarkdownCode" Language="razor" />
        </div>
    </Examples>

    <Props>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Value</code></td>
                    <td>string</td>
                    <td>""</td>
                    <td>HTML content value</td>
                </tr>
                <tr>
                    <td><code>Placeholder</code></td>
                    <td>string</td>
                    <td>"Start typing..."</td>
                    <td>Placeholder text when empty</td>
                </tr>
                <tr>
                    <td><code>ReadOnly</code></td>
                    <td>bool</td>
                    <td>false</td>
                    <td>Make editor read-only</td>
                </tr>
                <tr>
                    <td><code>MinHeight</code></td>
                    <td>string</td>
                    <td>"200px"</td>
                    <td>Minimum height of editor</td>
                </tr>
                <tr>
                    <td><code>MaxHeight</code></td>
                    <td>string</td>
                    <td>null</td>
                    <td>Maximum height before scrolling</td>
                </tr>
                <tr>
                    <td><code>Toolbar</code></td>
                    <td>ToolbarConfiguration</td>
                    <td>Default</td>
                    <td>Toolbar buttons configuration</td>
                </tr>
                <tr>
                    <td><code>AllowImageUpload</code></td>
                    <td>bool</td>
                    <td>false</td>
                    <td>Enable image upload functionality</td>
                </tr>
            </tbody>
        </table>
    </Props>

    <Events>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>ValueChanged</code></td>
                    <td>EventCallback&lt;string&gt;</td>
                    <td>Callback when content changes</td>
                </tr>
                <tr>
                    <td><code>OnBlur</code></td>
                    <td>EventCallback</td>
                    <td>Callback when editor loses focus</td>
                </tr>
                <tr>
                    <td><code>OnFocus</code></td>
                    <td>EventCallback</td>
                    <td>Callback when editor gains focus</td>
                </tr>
                <tr>
                    <td><code>OnImageUpload</code></td>
                    <td>EventCallback&lt;IBrowserFile&gt;</td>
                    <td>Callback when image is uploaded</td>
                </tr>
            </tbody>
        </table>
    </Events>

    <AccessibilityNotes>
        <ul>
            <li>Editable area has <code>role="textbox"</code> and <code>contenteditable="true"</code></li>
            <li>Toolbar buttons have descriptive labels and tooltips</li>
            <li>Keyboard shortcuts for common formatting (Ctrl+B, Ctrl+I, etc.)</li>
            <li>Focus management between toolbar and editor</li>
            <li>Screen reader announces formatting changes</li>
            <li>Proper heading hierarchy for semantic structure</li>
        </ul>
    </AccessibilityNotes>
</ComponentPage>

@code {
    private string editorContent = "<p>Welcome to the rich text editor! Try formatting this text.</p>";
    private List<string> relatedComponents = new() { "TextArea", "Input", "FileUpload" };

    private string BasicCode => @"<RichTextEditor @bind-Value=""@content""
                Placeholder=""Write your content here..."" />

@code {
    private string content = """";
}";

    private string CustomToolbarCode => @"<RichTextEditor @bind-Value=""@content""
                Toolbar=""@customToolbar"" />

@code {
    private string content = """";

    private ToolbarConfiguration customToolbar = new()
    {
        Buttons = new[]
        {
            ToolbarButton.Bold,
            ToolbarButton.Italic,
            ToolbarButton.Underline,
            ToolbarButton.Separator,
            ToolbarButton.BulletList,
            ToolbarButton.NumberedList,
            ToolbarButton.Separator,
            ToolbarButton.Link,
            ToolbarButton.Image
        }
    };
}";

    private string ReadOnlyCode => @"<RichTextEditor Value=""@previewContent""
                ReadOnly=""true""
                MinHeight=""300px"" />

@code {
    private string previewContent = @""
        <h2>Welcome to Our Blog</h2>
        <p>This is a preview of your content in read-only mode.</p>
        <ul>
            <li>Clean formatting</li>
            <li>Preserved styles</li>
            <li>No editing allowed</li>
        </ul>
    "";
}";

    private string FileUploadCode => @"<RichTextEditor @bind-Value=""@content""
                AllowImageUpload=""true""
                OnImageUpload=""@HandleImageUpload"" />

@code {
    private string content = """";

    private async Task<string> HandleImageUpload(IBrowserFile file)
    {
        // Upload image to server
        var imageUrl = await UploadImageAsync(file);
        return imageUrl;
    }

    private async Task<string> UploadImageAsync(IBrowserFile file)
    {
        using var stream = file.OpenReadStream(maxAllowedSize: 5 * 1024 * 1024);
        // Upload to your storage service
        return ""https://example.com/images/uploaded-image.jpg"";
    }
}";

    private string MarkdownCode => @"<div class=""editor-container"">
    <RichTextEditor @bind-Value=""@htmlContent""
                    OnBlur=""@ConvertToMarkdown"" />

    <div class=""markdown-preview"">
        <h3>Markdown Output</h3>
        <pre><code>@markdownContent</code></pre>
    </div>
</div>

@code {
    private string htmlContent = """";
    private string markdownContent = """";

    private void ConvertToMarkdown()
    {
        // Convert HTML to Markdown
        markdownContent = HtmlToMarkdownConverter.Convert(htmlContent);
    }
}";
}
