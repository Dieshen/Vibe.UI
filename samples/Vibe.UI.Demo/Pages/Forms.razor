@page "/forms"

<PageTitle>Form Components - Vibe.UI Demo</PageTitle>

<div class="component-section">
    <h1>Form Components</h1>
    <p>Components for building forms with validation and data management.</p>

    <h2>Form with Validation</h2>
    <div class="demo-container">
        <Form Model="@formModel" OnValidSubmit="HandleValidSubmit">
            <ValidatedInput
                Label="Full Name"
                @bind-Value="formModel.Name"
                Required="true"
                ErrorMessage="Name is required" />

            <ValidatedInput
                Label="Email"
                Type="email"
                @bind-Value="formModel.Email"
                Required="true"
                ErrorMessage="Valid email is required" />

            <ValidatedInput
                Label="Age"
                Type="number"
                @bind-Value="formModel.Age"
                Min="18"
                Max="120"
                ErrorMessage="Age must be between 18 and 120" />

            <TextArea
                Label="Comments"
                @bind-Value="formModel.Comments"
                Rows="4"
                Placeholder="Optional comments..." />

            <div style="margin-top: 1rem;">
                <Button Type="submit" Variant="primary">Submit</Button>
                <Button Type="button" Variant="outline" @onclick="ResetForm">Reset</Button>
            </div>
        </Form>

        @if (submitted)
        {
            <Alert Variant="Alert.AlertVariant.Success" Style="margin-top: 1rem;">
                Form submitted successfully!
            </Alert>
        }
    </div>

    <h2>Form Fields</h2>
    <div class="demo-container">
        <h3>Label</h3>
        <Label For="example-input">Example Label</Label>
        <Input Id="example-input" Placeholder="Input with label" />

        <h3>Form Field with Helper</h3>
        <FormField TValue="string" @bind-Value="exampleUsername">
            <Label>Username</Label>
            <Input @bind-Value="exampleUsername" Placeholder="Enter username" />
            <p class="helper-text">Choose a unique username</p>
        </FormField>

        <h3>Form Field with Error</h3>
        <FormField TValue="string" @bind-Value="examplePassword">
            <Label>Password</Label>
            <Input Type="password" @bind-Value="examplePassword" />
            <p class="error-text">Password is too short</p>
        </FormField>
    </div>

    <h2>Validated Input Examples</h2>
    <div class="demo-container">
        <h3>Required Field</h3>
        <ValidatedInput TValue="string"
            Label="Required Field"
            @bind-Value="requiredField"
            Required="true"
            ErrorMessage="This field is required" />

        <h3>Email Validation</h3>
        <ValidatedInput TValue="string"
            Label="Email Address"
            Type="email"
            @bind-Value="emailField"
            Required="true"
            ErrorMessage="Please enter a valid email" />

        <h3>Number Range</h3>
        <ValidatedInput TValue="int"
            Label="Age"
            Type="number"
            @bind-Value="ageField"
            Min="0"
            Max="150"
            ErrorMessage="Age must be between 0 and 150" />

        <h3>Pattern Validation</h3>
        <ValidatedInput TValue="string"
            Label="Phone Number"
            @bind-Value="phoneField"
            Pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
            Placeholder="123-456-7890"
            ErrorMessage="Format: 123-456-7890" />
    </div>

    <h2>Complex Form Example</h2>
    <div class="demo-container">
        <Form Model="@registrationModel">
            <h3>Account Information</h3>

            <ValidatedInput
                Label="Username"
                @bind-Value="registrationModel.Username"
                Required="true"
                MinLength="3"
                ErrorMessage="Username must be at least 3 characters" />

            <ValidatedInput
                Label="Email"
                Type="email"
                @bind-Value="registrationModel.Email"
                Required="true" />

            <ValidatedInput
                Label="Password"
                Type="password"
                @bind-Value="registrationModel.Password"
                Required="true"
                MinLength="8"
                ErrorMessage="Password must be at least 8 characters" />

            <h3 style="margin-top: 2rem;">Personal Information</h3>

            <ValidatedInput
                Label="First Name"
                @bind-Value="registrationModel.FirstName"
                Required="true" />

            <ValidatedInput
                Label="Last Name"
                @bind-Value="registrationModel.LastName"
                Required="true" />

            <Select Label="Country" Required="true">
                <option value="">Select a country</option>
                <option value="us">United States</option>
                <option value="ca">Canada</option>
                <option value="uk">United Kingdom</option>
                <option value="de">Germany</option>
                <option value="fr">France</option>
            </Select>

            <h3 style="margin-top: 2rem;">Preferences</h3>

            <Checkbox Label="Subscribe to newsletter" @bind-Checked="registrationModel.Subscribe" />
            <Checkbox Label="I agree to the terms and conditions" @bind-Checked="registrationModel.AgreeToTerms" />

            <div style="margin-top: 2rem;">
                <Button Type="submit" Variant="primary" Size="large">Create Account</Button>
            </div>
        </Form>
    </div>
</div>

@code {
    private FormModel formModel = new();
    private RegistrationModel registrationModel = new();
    private bool submitted = false;

    private string exampleUsername = "";
    private string examplePassword = "";
    private string requiredField = "";
    private string emailField = "";
    private int ageField = 0;
    private string phoneField = "";

    private void HandleValidSubmit()
    {
        submitted = true;
        StateHasChanged();
    }

    private void ResetForm()
    {
        formModel = new FormModel();
        submitted = false;
    }

    public class FormModel
    {
        public string Name { get; set; } = "";
        public string Email { get; set; } = "";
        public int Age { get; set; } = 25;
        public string Comments { get; set; } = "";
    }

    public class RegistrationModel
    {
        public string Username { get; set; } = "";
        public string Email { get; set; } = "";
        public string Password { get; set; } = "";
        public string FirstName { get; set; } = "";
        public string LastName { get; set; } = "";
        public string Country { get; set; } = "";
        public bool Subscribe { get; set; } = true;
        public bool AgreeToTerms { get; set; } = false;
    }
}

<style>
    .helper-text {
        font-size: 0.875rem;
        opacity: 0.7;
        margin-top: 0.25rem;
    }

    .error-text {
        font-size: 0.875rem;
        color: #ef4444;
        margin-top: 0.25rem;
    }
</style>
